<!DOCTYPE html>
<html>
<head>
  <title>Interactive Candle</title>
  <style>
    #candle {
      width: 100px;
      height: 200px;
      background-color: yellow;
      border-radius: 50%;
      position: relative;
    }
    #flame {
      width: 50px;
      height: 50px;
      background-color: orange;
      border-radius: 50%;
      position: absolute;
      bottom: 0;
      left: 25px;
      transition: height 0.2s;
    }
  </style>
</head>
<body>
  <div id="candle">
    <div id="flame"></div>
  </div>

  <script>
    // Get the audio context
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const audioContext = new AudioContext();

    // Create an analyser node
    const analyser = audioContext.createAnalyser();

    // Connect the analyser node to the audio source
    navigator.mediaDevices.getUserMedia({ audio: true })
      .then(stream => {
        const source = audioContext.createMediaStreamSource(stream);
        source.connect(analyser);
      })
      .catch(error => {
        console.error('Error accessing microphone:', error);
      });

    // Function to update the candle flame height based on sound level
    function updateCandle() {
      // Get the sound level data
      const dataArray = new Uint8Array(analyser.frequencyBinCount);
      analyser.getByteFrequencyData(dataArray);

      // Calculate the average sound level
      const average = dataArray.reduce((a, b) => a + b, 0) / dataArray.length;

      // Update the flame height based on the average sound level
      const flame = document.getElementById('flame');
      flame.style.height = `${average}px`;

      // Call the function again on the next animation frame
      requestAnimationFrame(updateCandle);
    }

    // Start updating the candle flame
    updateCandle();
  </script>
</body>
</html>
